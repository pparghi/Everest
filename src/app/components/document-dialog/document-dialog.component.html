<div *ngIf="data.documentsList">
  <div class="dialog-header">
    <h2 mat-dialog-title>Documents</h2>
  </div>
  <div class="dialog-content">
    <mat-dialog-content class="mat-typography">
      <ul *ngFor="let item of data.documentsList">
        <li (click)="openFile()" style="cursor: pointer;">{{ item.FileName }}</li>
      </ul>
      <hr>
        <label for="documentCategory"> <b>Category</b> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
        <select class="dropdown" [(ngModel)]="documentCategory" id="documentCategory">
          <option *ngFor="let category of data.documentCategory" value="{{ category.DocCatKey }}">{{ category.Descr }}</option>
        </select><br><br>

        <label for="documentDescr"> <b>Description</b> &nbsp;</label> 
        <input type="text" class="dropdown" [(ngModel)]="documentDescr" id="documentDescr"><br><br>  
              
        <div class="input-group custom-file-button">
          <label class="input-group-text" for="inputGroupFile">Browse</label>
          <input type="file" class="form-control" id="inputGroupFile" (change)="this.onFilechange($event)">
        </div>
        <br>
    </mat-dialog-content>
  </div>
  <div class="dialog-footer">
    <mat-dialog-actions align="end">
      <button mat-button mat-dialog-close>Cancel</button>
      <button mat-button [mat-dialog-close]="true" (click)="onSubmit()" cdkFocusInitial>Upload</button>
    </mat-dialog-actions>
  </div>
</div>

<script src="assets/js/tiff.min.js"></script>
<div *ngIf="data.DebtorContactsData">
  <div class="dialog-header">
    <h2 mat-dialog-title>Debtor Contacts</h2>
  </div>
  <div class="dialog-content"> 
    <mat-dialog-content class="mat-typography">
        <table mat-table [dataSource]="contactDataSource" class="mat-elevation-z8">
          
          <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef>Name</th>
              <td mat-cell *matCellDef="let element">{{ element.FirstName }}</td>
          </ng-container>

          <ng-container matColumnDef="email">
              <th mat-header-cell *matHeaderCellDef>Email</th>
              <td mat-cell *matCellDef="let element"><a href="mailto:{{ element.Email }}">{{ element.Email }}</a></td>
          </ng-container>

          <ng-container matColumnDef="contact_no">
              <th mat-header-cell *matHeaderCellDef>Contact No</th>
              <td mat-cell *matCellDef="let element"><a href="tel:{{ element.Phone }}">{{ element.Phone }}</a></td>
          </ng-container>

            <tr mat-header-row class="mat-header-row" *matHeaderRowDef="contactColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: contactColumns;"></tr>
        </table>
    </mat-dialog-content>
  </div>
  <div class="dialog-footer">
    <mat-dialog-actions align="end">
      <button mat-button mat-dialog-close>Cancel</button>
    </mat-dialog-actions>
  </div>
</div>

<div *ngIf="data.DebtorPaymentsData">
  <div class="dialog-header">
    <h2 mat-dialog-title>Payments</h2>
  </div>
  <div class="dialog-content">
    <mat-dialog-content class="mat-typography">
        <table mat-table [dataSource]="paymentDataSource" class="mat-elevation-z8">
          
          <ng-container matColumnDef="date">
              <th mat-header-cell *matHeaderCellDef>Date</th>
              <td mat-cell *matCellDef="let element">{{ element.CheckDate | date }}</td>
          </ng-container>

          <ng-container matColumnDef="check#">
              <th mat-header-cell *matHeaderCellDef>Check#</th>
              <td mat-cell *matCellDef="let element" (click)="getPaymentsImage(element)">{{ element.CheckNo }}</td>
          </ng-container>

          <ng-container matColumnDef="amount">
              <th mat-header-cell *matHeaderCellDef>Amount</th>
              <td mat-cell *matCellDef="let element">{{ element.Amt | roundThousands }}</td>
          </ng-container>

            <tr mat-header-row class="mat-header-row" *matHeaderRowDef="paymentColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: paymentColumns;"></tr>
        </table>
    </mat-dialog-content>
  </div>
  <div class="dialog-footer">
    <mat-dialog-actions align="end">
      <button mat-button mat-dialog-close>Cancel</button>
    </mat-dialog-actions>
  </div>
</div>

<div *ngIf="data.openForm">
  <div class="dialog-header">
    <h2 mat-dialog-title>Edit Debtor Details</h2>
  </div>
  <div class="dialog-content">
    <form [formGroup]="editForm" (ngSubmit)="onEdit()">
        <mat-dialog-content>
          <div class="row">
            <div class="col-md-6">
              <label for="Debtor" class="form-label">Debtor Name</label>
              <input type="text" id="Debtor" class="form-control" formControlName="Debtor" value="{{ this.debtor }}" required>
            </div>
            <div class="col-md-6">
              <label for="Duns" class="form-label">Duns</label>
              <input type="text" id="Duns" class="form-control" formControlName="Duns" required>
            </div>
          </div>
          <br>
          <div class="row">
            <div class="col-md-6">
              <label for="Addr1" class="form-label">Address 1</label>
              <input type="text" id="Addr1" class="form-control" formControlName="Addr1" required>
            </div>
            <div class="col-md-6">
              <label for="Addr2" class="form-label">Address 2</label>
              <input type="text" id="Addr2" class="form-control" formControlName="Addr2" required>
            </div>
          </div>
          <br>
          <div class="row">
            <div class="col-md-6">
              <label for="Phone1" class="form-label">Phone 1</label>
              <input type="text" id="Phone1" class="form-control" formControlName="Phone1" required>
            </div>
            <div class="col-md-6">
              <label for="Phone1" class="form-label">Phone 2</label>
              <input type="text" id="Phone1" class="form-control" formControlName="Phone1" required>
            </div>
          </div>
          <br>
          <div class="row">          
            <div class="col-md-6">
              <label for="City" class="form-label">City</label>
              <input type="text" id="City" class="form-control" formControlName="City" required>
            </div>        
            <div class="col-md-6">
              <label for="State" class="form-label">State</label>
              <input type="text" id="State" class="form-control" formControlName="State" required>
            </div>
          </div>
          <br>
          <div class="row">
            <div class="col-md-6">
              <label for="TotalCreditLimit" class="form-label">CreditLimit</label>
              <input type="text" id="TotalCreditLimit" class="form-control" formControlName="TotalCreditLimit" required>
            </div>

            <div class="col-md-6">
              <label for="AIGLimit" class="form-label">AIGLimit</label>
              <input type="text" id="AIGLimit" class="form-control" formControlName="AIGLimit" required>
            </div>
          </div>
          <br>

          <div class="row">
            <div class="col-md-6">
              <label for="Terms" class="form-label">Terms</label>
              <input type="text" id="Terms" class="form-control" formControlName="Terms" required>
            </div>            
          </div>
            
          </mat-dialog-content>
          <mat-dialog-actions>
            <button mat-button mat-dialog-close>Cancel</button>
            <button mat-button type="submit" [disabled]="editForm.invalid">Save</button>
          </mat-dialog-actions>
    </form>
  </div>
</div>

<div *ngIf="data.noa">
  <div class="dialog-header">
    <h2 mat-dialog-title>NOA</h2>
  </div>
  <div class="dialog-content">
    <mat-dialog-content class="mat-typography">
      <label for="noaStatus"> <b>Status</b> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
      <select class="dropdown" (change)="onChange($event)" id="noaStatus">
        <option *ngFor="let status of noaStatus" [value]="status.value">{{ status.label }}</option>
      </select>
  <br><br>
    <div *ngIf="changedNoaStatus == 'Received'">
      <h3 mat-dialog-title>Upload Document</h3>
      <label for="documentCategory"> <b>Category</b> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
        <select class="dropdown" [(ngModel)]="documentCategory" id="documentCategory">
          <option *ngFor="let category of data.documentCategory" value="{{ category.DocCatKey }}">{{ category.Descr }}</option>
        </select><br><br>
    
        <label for="documentDescr"> <b>Description</b> &nbsp;</label> 
        <input type="text" class="dropdown" [(ngModel)]="documentDescr" id="documentDescr"><br><br>  
              
        <div class="input-group custom-file-button">
          <label class="input-group-text" for="inputGroupFile">Browse</label>
          <input type="file" class="form-control" id="inputGroupFile" (change)="this.onFilechange($event)">
        </div>
      </div><br>
    </mat-dialog-content>
  </div>
  <div class="dialog-footer">
    <mat-dialog-actions align="end">
      <button mat-button mat-dialog-close>Cancel</button>
      <button mat-button [mat-dialog-close]="true" (click)="onSubmit()" cdkFocusInitial>Update</button>
    </mat-dialog-actions>
  </div>
</div>

<div *ngIf="data.MiscDataList">
  <div class="dialog-header">
    <h2 mat-dialog-title>Misc. Data</h2>
  </div>
  <div class="dialog-content">
    <mat-dialog-content class="mat-typography">
        <table mat-table [dataSource]="MiscDataListDataSource" class="mat-elevation-z8">
          
          <ng-container matColumnDef="element">
              <th mat-header-cell *matHeaderCellDef>Element</th>
              <td mat-cell *matCellDef="let element">{{ element.DataElementName }}</td>
          </ng-container>

          <ng-container matColumnDef="value">
              <th mat-header-cell *matHeaderCellDef>Value</th>
              <td mat-cell *matCellDef="let element">{{ element.FldValue }}</td>
          </ng-container>

            <tr mat-header-row class="mat-header-row" *matHeaderRowDef="miscDataColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: miscDataColumns;"></tr>
        </table>
    </mat-dialog-content>
  </div>
  <div class="dialog-footer">
    <mat-dialog-actions align="end">
      <button mat-button mat-dialog-close>Cancel</button>
    </mat-dialog-actions>
  </div>
</div>

<div *ngIf="data.ClientAccountStatus">  
  <div class="dialog-content">
    <br>
    <div style="text-align: center;">&nbsp;&nbsp;{{ data.Client }}&nbsp;&nbsp;</div>
    <mat-dialog-content class="mat-typography" >
        <table>
          <tr>
            <td>Dilution</td>
            <td>
              <div *ngIf="data.Dilution <= 1.5">
                &nbsp;&nbsp;&nbsp;<i class="fa fa-circle" style="color: green; font-size: 10px;" aria-hidden="true" title="{{ data.Dilution }}"></i>&nbsp; {{ data.Dilution | roundThousands }} %
              </div>
              <div *ngIf="data.Dilution >= 1.51 && data.Dilution <= 3" >
                &nbsp;&nbsp;&nbsp;<i class="fa fa-circle" style="color: orange; font-size: 10px;" aria-hidden="true" title="{{ data.Dilution }}"></i>&nbsp; {{ data.Dilution | roundThousands }} %
              </div>
              <div *ngIf="data.Dilution > 3" >
                &nbsp;&nbsp;&nbsp;<i class="fa fa-circle" style="color: red; font-size: 10px;" aria-hidden="true" title="{{ data.Dilution }}"></i>&nbsp; {{ data.Dilution | roundThousands }} %
              </div>
            </td>
          </tr>
          <tr>
            <td>Ineligibles</td>
            <td>
              <div *ngIf="data.Ineligibles <= 4.9">
                &nbsp;&nbsp;&nbsp;<i class="fa fa-circle" style="color: green; font-size: 10px;" aria-hidden="true" title="{{ data.Ineligibles }}"></i>&nbsp; {{ data.Ineligibles | roundThousands }} %
              </div>
              <div *ngIf="data.Ineligibles >= 5 && data.Ineligibles <= 10" >
                &nbsp;&nbsp;&nbsp;<i class="fa fa-circle" style="color: orange; font-size: 10px;" aria-hidden="true" title="{{ data.Ineligibles }}"></i>&nbsp; {{ data.Ineligibles | roundThousands }} %
              </div>
              <div *ngIf="data.Ineligibles > 10" >
                &nbsp;&nbsp;&nbsp;<i class="fa fa-circle" style="color: red; font-size: 10px;" aria-hidden="true" title="{{ data.Ineligibles }}"></i>&nbsp; {{ data.Ineligibles | roundThousands }} %
              </div>
            </td>            
          </tr>
          <tr>
            <td>Availability</td>
            <td>
              <div *ngIf="data.Availability < -2" >
                &nbsp;&nbsp;&nbsp;<i class="fa fa-circle" style="color: red; font-size: 10px;" aria-hidden="true" title="{{ data.Availability }}"></i>&nbsp; {{ data.Availability | roundThousands }} %
              </div>
              <div *ngIf="data.Availability < 0 && data.Availability >= -2" >
                &nbsp;&nbsp;&nbsp;<i class="fa fa-circle" style="color: orange; font-size: 10px;" aria-hidden="true" title="{{ data.Availability }}"></i>&nbsp; {{ data.Availability | roundThousands }} %
              </div>
              <div *ngIf="data.Availability >= 0">
                &nbsp;&nbsp;&nbsp;<i class="fa fa-circle" style="color: green; font-size: 10px;" aria-hidden="true" title="{{ data.Availability }}"></i>&nbsp; {{ data.Availability | roundThousands }} %
              </div>              
            </td>            
          </tr>
        </table>
    </mat-dialog-content>
  </div>  
</div>